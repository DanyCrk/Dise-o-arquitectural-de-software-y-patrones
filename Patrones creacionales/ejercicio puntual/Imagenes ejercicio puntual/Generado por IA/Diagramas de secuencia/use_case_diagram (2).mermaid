%%{init: {'theme':'base'}}%%
graph LR
    %% Actor
    Usuario["ðŸ‘¤ Usuario"]
    
    %% System Boundary with Use Cases
    subgraph Sistema["ðŸš— Sistema de BÃºsqueda de VehÃ­culos (Abstract Factory Pattern)"]
        direction TB
        
        subgraph Primarios["Casos de Uso de Usuario"]
            UC_MAIN("Usar Sistema de<br/>BÃºsqueda de VehÃ­culos")
            UC1("Seleccionar CategorÃ­a<br/>de VehÃ­culo")
            UC2("Seleccionar Tipo<br/>de VehÃ­culo")
            UC3("Buscar y Mostrar<br/>InformaciÃ³n de VehÃ­culo")
            UC4("Visualizar Resultado<br/>de BÃºsqueda")
            UC5("Salir del Sistema")
        end
        
        subgraph Internos["Procesos Internos (Abstract Factory)"]
            UC6("Obtener FÃ¡brica<br/>Apropiada")
            UC7("Crear VehÃ­culo<br/>de Lujo")
            UC8("Crear VehÃ­culo<br/>No Lujoso")
            UC9("Obtener CaracterÃ­sticas<br/>del VehÃ­culo")
        end
    end
    
    %% Actor to Main Use Case ONLY
    Usuario ==> UC_MAIN
    
    %% Main use case includes selection interface
    UC_MAIN -.->|"â‰ªincludeâ‰«"| UC1
    UC_MAIN -.->|"â‰ªincludeâ‰«"| UC2
    
    %% Two main actions extend from main (user chooses one)
    UC3 -.->|"â‰ªextendâ‰«<br/>[usuario presiona Show]"| UC_MAIN
    UC5 -.->|"â‰ªextendâ‰«<br/>[usuario presiona Exit]"| UC_MAIN
    
    %% Search includes visualization
    UC3 -.->|"â‰ªincludeâ‰«"| UC4
    
    %% Search includes internal processes (Abstract Factory)
    UC3 -.->|"â‰ªincludeâ‰«"| UC6
    UC3 -.->|"â‰ªincludeâ‰«"| UC9
    
    %% Factory selection extends based on category chosen by user
    UC7 -.->|"â‰ªextendâ‰«<br/>[categorÃ­a=Luxury]"| UC6
    UC8 -.->|"â‰ªextendâ‰«<br/>[categorÃ­a=Non-Luxury]"| UC6
    
    %% Styling
    style Usuario fill:#FFE0B2,stroke:#E65100,stroke-width:3px
    style Sistema fill:#E3F2FD,stroke:#1976D2,stroke-width:3px
    style Primarios fill:#F1F8E9,stroke:#558B2F,stroke-width:2px
    style Internos fill:#FCE4EC,stroke:#C2185B,stroke-width:2px
    
    style UC_MAIN fill:#42A5F5,stroke:#0D47A1,stroke-width:4px,color:#FFF
    style UC1 fill:#81C784,stroke:#2E7D32,stroke-width:2px
    style UC2 fill:#81C784,stroke:#2E7D32,stroke-width:2px
    style UC3 fill:#64B5F6,stroke:#1976D2,stroke-width:3px
    style UC4 fill:#AED581,stroke:#558B2F,stroke-width:2px
    style UC5 fill:#E57373,stroke:#C62828,stroke-width:2px
    
    style UC6 fill:#FFB74D,stroke:#E65100,stroke-width:2px
    style UC7 fill:#BA68C8,stroke:#6A1B9A,stroke-width:2px
    style UC8 fill:#BA68C8,stroke:#6A1B9A,stroke-width:2px
    style UC9 fill:#FFB74D,stroke:#E65100,stroke-width:2px